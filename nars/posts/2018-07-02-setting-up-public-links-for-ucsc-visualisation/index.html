<!DOCTYPE html>
<html lang="en"><head>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        :root {
            --accent-color: #FF4D4D;
        }
    </style>

    
    
    
    
    
    

    
    <title>Set Up Public Links For UCSC Genome Browser Visualisation At The WTSI</title>
    <meta name="description" content="Genomics | Bioinformatics | Epigenetics">
    <meta name="keywords" content='blog, gokarna, hugo, data science, biology, genomics, bioinformatics, unix, ucsc genome browser'>

    <meta property="og:url" content="https://notarocketscientist.xyz/posts/2018-07-02-setting-up-public-links-for-ucsc-visualisation/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Set Up Public Links For UCSC Genome Browser Visualisation At The WTSI">
    <meta property="og:description" content="Genomics | Bioinformatics | Epigenetics">
    <meta property="og:image" content="/images/profile_avatar.png">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Set Up Public Links For UCSC Genome Browser Visualisation At The WTSI">
    <meta name="twitter:description" content="Genomics | Bioinformatics | Epigenetics">
    <meta property="twitter:domain" content="https://notarocketscientist.xyz/posts/2018-07-02-setting-up-public-links-for-ucsc-visualisation/">
    <meta property="twitter:url" content="https://notarocketscientist.xyz/posts/2018-07-02-setting-up-public-links-for-ucsc-visualisation/">
    <meta name="twitter:image" content="/images/profile_avatar.png">

    
    <link rel="canonical" href="https://notarocketscientist.xyz/posts/2018-07-02-setting-up-public-links-for-ucsc-visualisation/" />

    <link rel="stylesheet" type="text/css" href="/css/normalize.min.css" media="print" onload="this.media='all'">
    <link rel="stylesheet" type="text/css" href="/css/main.css">
    <link disabled id="dark-theme" rel="stylesheet" href="/css/dark.css">

    <script src="/js/svg-injector.min.js"></script>
    <script src="/js/feather-icons.min.js"></script>
    <script src="/js/main.js"></script>

    
    
        <!-- KaTeX -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.16/dist/katex.min.css" integrity="sha384-6LkG2wmY8FK9E0vU9OOr8UvLwsaqUg9SETfpq4uTCN1agNe8HRdE9ABlk+fVx6gZ" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.16/dist/katex.min.js" integrity="sha384-31El76TwmbHj4rF9DyLsygbq6xoIobG0W+jqXim+a3dU9W53tdH3A/ngRPxOzzaB" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.16/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "$", right: "$", display: false}
                ]
            });
        });
    </script>
  
    
</head>
<body>
        <script type="text/javascript">
            
            setThemeByUserPref();
        </script><header class="header">
    <nav class="header-nav">

        
        <div class="avatar">
            <a href="https://notarocketscientist.xyz">
                <img src="https://notarocketscientist.xyz/images/profile_avatar.png" alt="avatar" />
            </a>
        </div>
        

        <div class="nav-title">
            <a class="nav-brand" href="https://notarocketscientist.xyz">Not A Rocket Scientist</a>
        </div>

        <div class="nav-links">
            
            <div class="nav-link">
                <a href="https://notarocketscientist.xyz/"><span data-feather='home'></span> Home </a>
            </div>
            
            <div class="nav-link">
                <a href="https://notarocketscientist.xyz/about/"><span data-feather='user'></span> About </a>
            </div>
            
            <div class="nav-link">
                <a href="https://notarocketscientist.xyz/posts/"><span data-feather='list'></span> Posts </a>
            </div>
            
            <div class="nav-link">
                <a href="https://notarocketscientist.xyz/projects/"><span data-feather='square'></span> Projects </a>
            </div>
            
            <div class="nav-link">
                <a href="https://notarocketscientist.xyz/tags/"><span data-feather='tag'></span> Tags </a>
            </div>
            
            <div class="nav-link">
                <a href="https://dbrg77.github.io/SUSTech-BIO210"><span data-feather='bar-chart-2'></span>  </a>
            </div>
            
            <div class="nav-link">
                <a href="https://github.com/Teichlab/scg_lib_structs"><span data-feather='smile'></span>  </a>
            </div>
            

            <span class="nav-icons-divider"></span>
            <div class="nav-link dark-theme-toggle">
                <span id="dark-theme-toggle-screen-reader-target" class="sr-only"></span>
                <a>
                    <span id="theme-toggle-icon" data-feather="moon"></span>
                </a>
            </div>

            <div class="nav-link" id="hamburger-menu-toggle">
                <span id="hamburger-menu-toggle-screen-reader-target" class="sr-only">menu</span>
                <a>
                    <span data-feather="menu"></span>
                </a>
            </div>

            
            <ul class="nav-hamburger-list visibility-hidden">
                
                <li class="nav-item">
                    <a href="https://notarocketscientist.xyz/"><span data-feather='home'></span> Home </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://notarocketscientist.xyz/about/"><span data-feather='user'></span> About </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://notarocketscientist.xyz/posts/"><span data-feather='list'></span> Posts </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://notarocketscientist.xyz/projects/"><span data-feather='square'></span> Projects </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://notarocketscientist.xyz/tags/"><span data-feather='tag'></span> Tags </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://dbrg77.github.io/SUSTech-BIO210"><span data-feather='bar-chart-2'></span>  </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://github.com/Teichlab/scg_lib_structs"><span data-feather='smile'></span>  </a>
                </li>
                
                <li class="nav-item dark-theme-toggle">
                    <span id="dark-theme-toggle-screen-reader-target" class="sr-only">theme</span>
                    <a>
                        <span id="theme-toggle-icon" data-feather="moon"></span>
                    </a>
                </li>
            </ul>

        </div>
    </nav>
</header>
<main id="content">
    <div class="post container">
    <div class="post-header-section">
        <h1>Set Up Public Links For UCSC Genome Browser Visualisation At The WTSI</h1>
        <small role="doc-subtitle"></small>
        <p class="post-date">
            July 2, 2018
        </p>

        <ul class="post-tags">
        
            <li class="post-tag"><a href="https://notarocketscientist.xyz/tags/bioinformatics">bioinformatics</a></li>
        
            <li class="post-tag"><a href="https://notarocketscientist.xyz/tags/unix">unix</a></li>
        
            <li class="post-tag"><a href="https://notarocketscientist.xyz/tags/ucsc-genome-browser">ucsc genome browser</a></li>
        
        </ul>
    </div>

    <div class="post-content">
        <p>
            <p>The best way of visualising sequencing reads pileup/coverage data (very useful for ChIP-seq, DNase-seq &amp; ATAC-seq) is to get the pileup/coverage files in <strong><a href="https://genome.ucsc.edu/goldenpath/help/bigWig.html">bigWig format</a></strong>, and visualise the signal as custom tracks using <strong><a href="https://genome.ucsc.edu/goldenpath/help/customTrack.html">UCSC genome browser</a></strong> - the best genome browser, period! The bigWig files are often large, especially when you have high coverage experiments. Therefore, you need a place to host your files, and they need to be in a place where UCSC genome browser can reach.</p>
<p>At Sanger, it is not so obvious how you can do it, but it is not difficult. The information is kind of hidden, and you need to find the right person to ask. At this moment of writing, there are two eay ways of achieving this goal.</p>
<h2 id="method-1-use-web-bfintdata">Method 1: use web-bfint:/data</h2>
<p>There is a host called <code>web-bfint</code>. You can simply access the host by <code>ssh your_sanger_id@web-bfint</code> and transfer files from/to it by <code>scp file_name your_sanger_id@web-bfint</code> as long as you are inside Sanger network. When you login to <code>web-bfint</code>, you will see a welcome message:</p>
<pre tabindex="0"><code>Welcome to Ubuntu 16.04 (xenial) (4.4.0-87-generic x86_64) 

* Managed by WTSI Ansible. 
  See the documentation here:
  https://ssg-confluence.internal.sanger.ac.uk/x/_YbRAw

Last login: Thu Jun  7 18:38:55 2018 from *.*.*.*
</code></pre><p>Once you are in <code>web-bfint</code>, there are two places that will be useful to you:</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#7f848e"># for short term deposition of files for collaborators and research</span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e"># data will be removed after a while</span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">#(I think it is every six months, not entirely sure though)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>/data/scratch/project
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e"># for long term files associated with formal journal publications or archival</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>/data/production
</span></span></code></pre></div><p>You create a ticket via ServiceDesk, asking them to create a directory there for your team under either <code>/data/scratch/project</code> or <code>/data/production</code> or both. Check with the IT person in your team, maybe you already have one there. For example, our team directory are <code>/data/scratch/project/team205</code> and <code>/data/production/teichmann</code>. The public address associated with those two directories are <code>ftp://ngs.sanger.ac.uk/scratch/project/team205</code> and <code>ftp://ngs.sanger.ac.uk/production/teichmann</code>, respectively. Anybody can access those places via those addresses anywhere, even outside Sanger network. You and your team members can create subdirectories for youselves.</p>
<p>For example, I have a bigWig file called <code>the_best_chip_seq_ever.bw</code> somewhere on Sanger farm, and I want to visualise it via UCSC genome browser. First, I need to transfer that file to my team directory on <code>web-bfint</code>. I locate the file on farm, and do:</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>scp the_best_chip_seq_ever.bw xc1@web-bfint:/data/production/teichmann/xi/
</span></span></code></pre></div><p>After the transfer, if I enter this address in my Chrome/Firefox <code>ftp://ngs.sanger.ac.uk/production/teichmann/xi</code>, I should be able to see the file there. Note: files are synced hourly, so you might exprience a delay between getting files to the directory and being able to see the files via the ftp address.</p>
<p>To visualise the file, I can just go to UCSC genome browser to add a custom track by (just an example, the following text should be in one single line):</p>
<pre tabindex="0"><code>track type=bigWig name=chip_seq description=the_best_chip_seq_ever_pileup
bigDataUrl=ftp://ngs.sanger.ac.uk/production/teichmann/xi/the_best_chip_seq_ever.bw
visibility=full maxHeightPixels=10:50:128 viewLimits=0:20 autoScale=OFF color=0,0,255
</code></pre><p>That&rsquo;s it.</p>
<h2 id="method-2-use-s3-storage">Method 2: use S3 storage</h2>
<p>The ftp method is easy, but it has a problem. Sometimes, especially when you have large amount of data, the UCSC genome browser shows an error: <code>ftp server error on cmd=[PASS x@genome.ucsc.edu]</code>. You have to keep refreshing the page several times, which is annoying.</p>
<p>Another way is to use <strong><a href="https://aws.amazon.com/s3/">S3 storage</a></strong> provided under Sanger Flexible Computing Environment. Again, create a ticket via ServiceDesk, saying that you want to use S3 storage. You can request a maximum of 100 GB. 100 GB is quite small, but it can still host quite a large amount of bigWig files.</p>
<p>After they created an S3 account for you, you will have a <code>.s3cfg</code> file in your home directory on Sanger farm, and the content will look like this (I ommited security part):</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat ~/.s3cfg 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#56b6c2">[</span>default<span style="color:#56b6c2">]</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">encrypt</span> <span style="color:#56b6c2">=</span> False
</span></span><span style="display:flex;"><span><span style="color:#e06c75">host_base</span> <span style="color:#56b6c2">=</span> cog.sanger.ac.uk
</span></span><span style="display:flex;"><span><span style="color:#e06c75">host_bucket</span> <span style="color:#56b6c2">=</span> %<span style="color:#56b6c2">(</span>bucket<span style="color:#56b6c2">)</span>s.cog.sanger.ac.uk
</span></span><span style="display:flex;"><span><span style="color:#e06c75">progress_meter</span> <span style="color:#56b6c2">=</span> True
</span></span><span style="display:flex;"><span><span style="color:#e06c75">use_https</span> <span style="color:#56b6c2">=</span> True
</span></span><span style="display:flex;"><span><span style="color:#e06c75">access_key</span> <span style="color:#56b6c2">=</span> *************
</span></span><span style="display:flex;"><span><span style="color:#e06c75">secret_key</span> <span style="color:#56b6c2">=</span> *****************
</span></span></code></pre></div><p>You will need the tool <code>s3cmd</code>, which is already installed on Sanger farm. S3 storage is so-called object storage. It does not have a hierarchical structure like the file system on unix. Instead, you create buckets, and you put your files/objects in the bucket you created. The name of the bucket must be unique within the entire institute, so it is better to name the bucket related to your Sanger user name.</p>
<p>For example, I want to create a bucket named <code>xc1_mSp_scATAC</code> to put all my scATAC-seq bigWig files there, so, on Sanger farm, I do:</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>s3cmd mb s3://xc1_mSp_scATAC
</span></span></code></pre></div><p>Then, I have a bigWig file called <code>the_best_atac_seq_ever.bw</code> somewhere on the farm. To visualise it, I first need to put it in my s3 bucket that I just created. This can be achieved by locating the bigWig file on the farm and doing:</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>s3cmd put the_best_atac_seq_ever.bw s3://xc1_mSp_scATAC
</span></span></code></pre></div><p>By default, the file/object in the bucket is private. Then, I need to make the file public so that UCSC genome browser can reach it. This can be done by:</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>s3cmd setacl --acl-public s3://xc1_mSp_scATAC/the_best_atac_seq_ever.bw
</span></span></code></pre></div><p>Now, it is done. The public address for the bigWig file is <code>https://cog.sanger.ac.uk/xc1_mSp_scATAC/the_best_atac_seq_ever.bw</code> (now you see why the bucket name must be unique across the entire institute, right?).</p>
<p>To visualise the file, I can just go to UCSC genome browser to add a custom track by (similar example as the previous one, and again, the following text should be in one single line):</p>
<pre tabindex="0"><code>track type=bigWig name=atac_seq description=the_best_atac_seq_ever_pileup
bigDataUrl=https://cog.sanger.ac.uk/xc1_mSp_scATAC/the_best_atac_seq_ever.bw
visibility=full maxHeightPixels=10:50:128 viewLimits=0:20 autoScale=OFF color=0,0,255
</code></pre><p>For more <code>s3cmd</code> usage, such as listing buckets/files, creating and deleting buckets/files, you can simply do <code>s3cmd --help</code>.</p>
<p>Enjoy the visualisation.</p>
<p><img src="https://raw.githubusercontent.com/dbrg77/plate_scATAC-seq/master/figures/ucsc_example_cxcr5_locus.jpg" alt=""></p>

        </p>
    </div>

    <div class="prev-next">
        
    </div>
</div>



    

        </main><footer class="footer">
    <span>&copy; 2025 Not A Rocket Scientist</span>
    <span>
        Made with &#10084;&#65039; using <a target="_blank" href="https://github.com/526avijitgupta/gokarna">Gokarna</a>
    </span>
</footer>
</body>
</html>
